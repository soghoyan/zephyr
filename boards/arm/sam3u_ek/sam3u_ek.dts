/*
 * Copyright (c) 2023 Chen Xingyu <hi@xingrz.me>
 * SPDX-License-Identifier: Apache-2.0
 */

/dts-v1/;

#include <atmel/sam3u4e.dtsi>
#include "sam3u_ek-pinctrl.dtsi"

/ {
	model = "Atmel SAM3U-EK Board with Atmel SAM3U4E SoC";
	compatible = "atmel,sam3u_ek";

	aliases {
		led0 = &usr_led1;
		led1 = &usr_led2;
		sw0 = &bp_left;
		sw1 = &bp_right;
		lcd-backlight = &lcd_backlight;
	};

	chosen {
		zephyr,console = &uart;
		zephyr,shell-uart = &uart;
		zephyr,sram = &sram0;
		zephyr,flash = &flash0;
		zephyr,keyboard-scan = &kscan;
	};

	leds {
		compatible = "gpio-leds";

		usr_led1: usr_led1 {
			gpios = <&piob 0 GPIO_ACTIVE_LOW>;
			label = "USR_LED1";
		};

		usr_led2: usr_led2 {
			gpios = <&piob 1 GPIO_ACTIVE_LOW>;
			label = "USR_LED2";
		};
	};

	gpio_keys {
		compatible = "gpio-keys";

		bp_left: bp_left {
			gpios = <&pioa 18 GPIO_ACTIVE_LOW>;
			label = "BP_LEFT";
		};

		bp_right: bp_right {
			gpios = <&pioa 19 GPIO_ACTIVE_LOW>;
			label = "BP_RIGHT";
		};
	};

	lcd_backlight: aat3194 {
		compatible = "skyworks,aat3194";
		output-gpios = <&pioc 19 0>;
	};
};

&pioa {
	status = "okay";
};

&piob {
	status = "okay";
};

&pioc {
	status = "okay";
};

&uart {
	status = "okay";
	current-speed = <115200>;

	pinctrl-0 = <&uart_default>;
	pinctrl-names = "default";
};

&spi {
	status = "okay";

	pinctrl-0 = <&spi_default>;
	pinctrl-names = "default";

	cs-gpios = <&pioc 14 GPIO_ACTIVE_LOW>;

	kscan: ads7843@0 {
		compatible = "xptek,xpt2046";

		reg = <0>;
		spi-max-frequency = <DT_FREQ_K(100)>;

		int-gpios = <&pioa 24 GPIO_ACTIVE_LOW>;
		touchscreen-size-x = <240>;
		touchscreen-size-y = <320>;
		min-x = <0>;
		min-y = <0>;
		max-x = <4095>;
		max-y = <4095>;
	};
};
